# 9. Autonomous Driving Extension Course

## 9.1 Autonomous Driving Kit

### 9.1.1 Introduction

The AiNova Autonomous Driving Kit is an AI-powered smart traffic demonstration set that includes the AiNova vision robot, an MP3 module, and various smart traffic scenario elements such as maps, traffic lights, and road signs.

The AiNova vision robot is equipped with a WonderCam vision module, an MP3 module, and a programmable CoreX controller. With Scratch-based graphical programming, you can implement features such as traffic light recognition, traffic sign recognition, and voice announcements via the MP3 module.

The traffic light structure is built with durable and aesthetically pleasing aluminum alloy frames. It includes an RGB lighting module and a programmable CoreX controller, allowing users to control the light colors through Scratch programming.

<img class="common_img"  src="../_static/media/chapter_9/section_1/image2.png"  />

### 9.1.2  Packing List

| **No.** |          **Components**           | **Quantity** |                         **Picture**                          |
| :-----: | :-------------------------------: | :----------: | :----------------------------------------------------------: |
|    1    |          AiNova Brackets          |      3       | <img src="../_static/media/chapter_1/section_2/1.png" style="width:300px;"/> |
|    2    |         CoreX controller          |      1       | <img src="../_static/media/chapter_1/section_2/2.png" style="width:240px;"/> |
|    3    |      Glowy ultrasonic sensor      |      1       | <img src="../_static/media/chapter_1/section_2/3.png" style="width:160px;"/> |
|    4    |        4-ch line follower         |      1       | <img src="../_static/media/chapter_1/section_2/4.png" style="width:200px;"/> |
|    5    |           Encoder motor           |      2       | <img src="../_static/media/chapter_1/section_2/5.png" style="width:200px;"/> |
|    6    |           Battery case            |      1       | <img src="../_static/media/chapter_1/section_2/6.png"style="width:300px;" /> |
|    7    |          Battery charger          |      1       | <img src="../_static/media/chapter_1/section_2/7.png" style="width:260px;"/> |
|    8    |           Silisone tyre           |      2       | <img src="../_static/media/chapter_1/section_2/8.png" style="width:320px;"/> |
|    9    |          Universal wheel          |      1       | <img src="../_static/media/chapter_1/section_2/9.png" style="width:100px;"/> |
|   10    |             USB cable             |      3       | <img  src="../_static/media/chapter_1/section_2/29.png"   /> |
|   11    |            4PIN wires             |      3       | <img  src="../_static/media/chapter_1/section_2/31.png"   /> |
|   12    |         Map + Motor wire          |      3       | <img src="../_static/media/chapter_1/section_2/12.png" style="width:350px;"/><br/><img src="../_static/media/chapter_1/section_2/12.1.png" style="width:180px;"/> |
|   13    |          Accessory bag1           |      1       | <img src="../_static/media/chapter_1/section_2/33.png" style="width:250px;"/> |
|   14    |           18650 battery           |      4       | <img src="../_static/media/chapter_1/section_2/11.png" style="width:170px;"/> |
|   15    |    WonderCam AI vision module     |      1       | <img src="../_static/media/chapter_1/section_2/15.png" style="width:200px;"/> |
|   16    |      Mental protective shell      |      2       | <img src="../_static/media/chapter_1/section_2/16.png" style="width:200px;"/> |
|   17    |            Waste cards            |      12      | <img src="../_static/media/chapter_1/section_2/17.png" style="width:350px;"/> |
|   18    |           Number cards            |      5       | <img src="../_static/media/chapter_1/section_2/18.png" style="width:300px;"/> |
|   19    |               Tags                |      3       | <img src="../_static/media/chapter_1/section_2/19.png" style="width:300px;"/> |
|   20    |           Traffic signs           |      6       | <img src="../_static/media/chapter_1/section_2/20.png" style="width:300px;"/> |
|   21    |              Manual               |      1       | <img src="../_static/media/chapter_1/section_2/14.png" style="width:300px;"/> |
|   22    |       Traffic light bracket       |      1       | <img src="../_static/media/chapter_1/section_2/21.png" style="width:350px;"/> |
|   23    |             End cover             |      6       | <img src="../_static/media/chapter_1/section_2/22.png" style="width:200px;"/> |
|   24    |            RGB sensor             |      1       | <img src="../_static/media/chapter_1/section_2/23.png" style="width:160px;"/> |
|   25    |             4PIN wire             |      4       |  <img src="../_static/media/chapter_1/section_2/24.png" />   |
|   26    |           1.2 *0.8m map           |      1       | <img src="../_static/media/chapter_1/section_2/30.jpg" style="width:350px;"/> |
|   27    |       Turning sign bracket        |      1       | <img src="../_static/media/chapter_1/section_2/25.png" style="width:300px;"/> |
|   28    | MP3 module(128M TF card included) |      1       | <img src="../_static/media/chapter_1/section_2/26.png" style="width:160px;"/> |
|   29    |        MP3 module bracket         |      1       | <img src="../_static/media/chapter_1/section_2/27.png" style="width:200px;"/> |
|   30    |         Double-sided tape         |      1       |  <img src="../_static/media/chapter_1/section_2/28.png" />   |
|   31    |          Accessory bag2           |      1       | <img src="../_static/media/chapter_1/section_2/32.png" style="width:250px;"/> |

## 9.2 Map Layout and Accessories Assembly Tutorial

### 9.2.1 Traffic Sign Assembly Guide

<p class="step">Step1:</p>

<img class="common_img" src="../_static/media/chapter_9/section_2/01/01.jpg" style="width:800px;"/>

<img class="common_img" src="../_static/media/chapter_9/section_2/01/1-1.png" style="width:400px;"/>

<p class="step">Step2:</p>

<img class="common_img" src="../_static/media/chapter_9/section_2/01/02.jpg" style="width:800px;"/>

<img class="common_img" src="../_static/media/chapter_9/section_2/01/2-1.png" />

<p class="step">Step3:</p>

<img class="common_img" src="../_static/media/chapter_9/section_2/01/3.png" style="width:800px;"/>

### 9.2.2 Traffic Light Assembly Guide

<p class="step">Step1:</p>

<img class="common_img" src="../_static/media/chapter_9/section_2/02/1.jpg" style="width:800px;"/>

<p class="step">Step2:</p>

<img class="common_img" src="../_static/media/chapter_9/section_2/02/2.jpg" style="width:800px;"/>

<img class="common_img" src="../_static/media/chapter_9/section_2/02/2-1.png" style="width:800px;"/>

<p class="step">Step3:</p>

<img class="common_img" src="../_static/media/chapter_9/section_2/02/3.jpg" style="width:800px;"/>

<img class="common_img" src="../_static/media/chapter_9/section_2/02/3-1.png" style="width:800px;"/>

<p class="step">Step4:</p>

<img class="common_img" src="../_static/media/chapter_9/section_2/02/4.png" style="width:800px;"/>

<img class="common_img" src="../_static/media/chapter_9/section_2/02/5.jpg" style="width:800px;"/>

### 9.2.3 MP3 Module Assembly Guide

<img class="common_img" src="../_static/media/chapter_9/section_2/03/01.jpg" style="width:800px;"/>

<img class="common_img" src="../_static/media/chapter_9/section_2/03/02.jpg" style="width:800px;"/>

## 9.3 Autonomous Driving Program Explanation

### 9.3.1 Project Introduction

This section demonstrates autonomous driving of the car using a four-channel line follower, WonderCam vision module, and MP3 module for voice announcements.

### 9.3.2 Program Procedure

<img class="common_img" src="../_static/media/chapter_9/section_3/image2.png"   />

### 9.3.3 Module Introduction

* **4-Channel Line Follower**

<img class="common_img" src="../_static/media/chapter_9/section_3/image3.png"   />

The four-channel line follower features four probes, each equipped with an infrared emitter and receiver. Since white surfaces reflect infrared strongly while black surfaces reflect weakly, the module can effectively distinguish between black and white. It offers fast detection and strong adaptability, making it well-suited for line-following applications in smart cars or robots—even when navigating relatively complex routes.

* **WonderCam Vision Module**

<img class="common_img" src="../_static/media/chapter_9/section_3/image4.png"   />

WonderCam is an easy-to-use AI vision sensor packed with powerful features such as color detection, face recognition, tag identification, visual line tracking, digit recognition, road sign detection, image classification, and feature learning. It is compatible with a wide range of controllers, including ESP32, micro:bit, Arduino, and Raspberry Pi, making it the perfect tool to bring your AI vision ideas to life with ease.

* **MP3 Module**

<img class="common_img" src="../_static/media/chapter_9/section_3/image5.png"   />

The MP3 module is a compact audio playback module that operates with simple commands. It features a 4-pin interface and supports hardware decoding of MP3, WAV, and WMA formats. It also supports TF memory cards and is compatible with FAT16 and FAT32 file systems. Communication is handled via I²C, with a built-in DSP handling digital signal processing, data transmission, and audio decoding—delivering clear and smooth music output.

### 9.3.4 Program Download

(1) Connect both the AiNova and the traffic light module to your computer using USB data cables.

(2) In the WonderCode main interface, click **“Connect”** and select the correct COM port.

:::{Note}

The port number may vary depending on your system. For example, COM4 is used in the image below. Do not select COM1, as it is typically reserved for system communication.

:::

<img class="common_img" src="../_static/media/chapter_9/section_3/image6.png"  />

<img class="common_img" src="../_static/media/chapter_9/section_3/image7.png"  />

(3) Once connected, drag the corresponding code files into WonderCode, then click the **“Upload”** button on the right under **Upload Mode**.

<img class="common_img" src="../_static/media/chapter_9/section_3/image8.png"  />

(4) Wait for the upload to complete.

<img class="common_img" src="../_static/media/chapter_9/section_3/image9.png"  />

###  9.3.5 Program Outcome

AiNova will follow the line using its line-tracking function. When the WonderCam vision module detects a road sign, it will control AiNova to turn accordingly and trigger a voice announcement. Upon recognizing a traffic light, the system will control the car to move or stop based on the light color, while the MP3 module plays the corresponding audio prompt.

<img class="common_img" src="../_static/media/chapter_9/section_3/1.gif"  />

###  9.3.6 Program Analysis

(1) At program startup, the WonderCam vision module, ultrasonic LED module, and MP3 module are initialized. The buzzer beeps once, and the car's initial speed is set to 60.

<img class="common_img" src="../_static/media/chapter_9/section_3/image10.png"  />

(2) In the main loop, the program first runs the left/right turn detection block, switches the vision module to road sign recognition mode, and controls the car to follow the line. Line-following continues until all four probes of the line sensor detect a white line, indicating a fork in the road. At this point, the car exits line-following mode and uses the vision module to identify the road sign ID.

<img class="common_img" src="../_static/media/chapter_9/section_3/image11.png"  />

(3) If the detected image ID is 2 or 3, the car will turn left or right accordingly based on the ID.

<img class="common_img" src="../_static/media/chapter_9/section_3/image12.png"  />

(4) The program then enters the traffic light detection function, switches the WonderCam to color recognition mode, and resumes line-following. Once all four probes again detect a white line simultaneously, the car exits line-following and stops.

<img class="common_img" src="../_static/media/chapter_9/section_3/image13.png"  />

(5) In a loop, the WonderCam detects the color of the traffic light. If red is detected, the car sets its LED to red and plays a corresponding audio message via the MP3 module.

<img class="common_img" src="../_static/media/chapter_9/section_3/image14.png"  />

(3) If green is detected, the LED turns green, and the MP3 module plays the appropriate message. The program then exits the color recognition loop and commands the car to move forward.

<img class="common_img" src="../_static/media/chapter_9/section_3/image15.png"  />